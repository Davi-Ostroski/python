<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Produtos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container"> <!-- Adiciona uma div container para centralizar o conteúdo -->
        <h1>Bem-vindo ao Sistema de Produtos</h1>
        <p>Este é um exemplo de sistema de gerenciamento de produtos usando Flask e Jinja
        <h1>Lista de Produtos</h1>

        <ul>
            <!-- Versao 1.0
            {% for p in produtos %}
            <li class="{% if p['promocao'] %}promocao{% endif %}">
                {{ p['nome'] }} - R$ {{ "%.2f"|format(p['preco']) }}
                {% if p['promocao'] %} <strong>(Promoção!)</strong> {% endif %}
            </li>
            {% endfor %} -->

            <!-- Versao 2.0 com a funcao de excluir -->
            {% for p in produtos %}
                <li class="{% if p['promocao'] %}promocao{% endif %}">
                    <div>
                        {{ p['nome'] }} - R$ {{ "%.2f"|format(p['preco']) }}
                        {% if p['promocao'] %}<strong> (Promoção!)</strong>{% endif %}
                    </div>

                    {% if session.get('user_id') %}
                    <form method="POST" action="{{ url_for('delete_product', id=p['id']) }}" onsubmit="return confirmarRemocao()">
                        <button type="submit" class="remover">Remover</button>
                    </form>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
        
        
         
        <a href="{{ url_for('add_product') }}">Adicionar Produto</a>
        {% if session.get('user_id') %}
            <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
            <a href="{{ url_for('login') }}">Login</a>
        {% endif %}
         <a href="{{ url_for('register') }}">Criar novo usuário</a>
         <button onclick="mensagem()">Clique Aqui</button>
    </div>
    
    <script>
        function mensagem() {
            alert("Obrigado por visitar!");
        }
        function confirmarRemocao() {
           return confirm("Tem certeza que deseja remover este produto?");
        }
    </script>
</body>
</html>
